<div class="relative" x-data="{ filterSlide : false }">
    <div class="px-4 py-8 z-0" :class="{ 'blur-xs z-120 pointer-events-none': filterSlide }">
        <div class="w-full">
            <a 
                href="{{ routes.collections_url }}"
                class="text-base text-gray-500 hover:underline text-center block my-4 w-40 mx-auto"
            >
                Go to collections
            </a>
        </div>

        
        {% paginate collection.products by section.settings.number_of_products_per_page %}
            <h1 class="text-3xl text-center">{{ collection.title }}</h1>
            <div class="max-w-6xl mx-auto">
                <div class="w-auto top-0 left-0 my-4">
                    <button 
                        @click="filterSlide = true"
                        type="button"
                        class="w-26 flex justify-between shadow-xl text-black py-2 ml-3 pl-4 pr-6 rounded-md cursor-pointer border-1"
                    >
                        {% render 'icon-filter-horizontal' %}
                        <span>filters</span>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    {% for product in collection.products %}
                        {% render 'product-card', product_item: product %}
                    {% else %}
                        <p class="md:col-span-3 text-center py-20">Sorry, there is no product inside of the collection.</p>
                    {% endfor %}
                </div>
            </div> 

            {% render 'pagination', pagination: paginate %}

        {% endpaginate %}
    </div>

    <!-- Slide-out Filter Sidebar -->
    <aside 
        x-show="filterSlide"
        @click.away="filterSlide = false"
        @keydown.escape.window="filterSlide = false"
        x-transition:enter="transition transform duration-300 ease-out"
        x-transition:enter-start="-translate-x-full"
        x-transition:enter-end="translate-x-0"
        x-transition:leave="transition transform duration-300 ease-in"
        x-transition:leave-start="translate-x-0"
        x-transition:leave-end="-translate-x-full"
        x-cloak
        class="fixed top-0 left-0 w-64 h-screen bg-white shadow z-[110]"
    >
        <div class="sticky top-0 p-6 overflow-y-auto h-screen">
            <h2 class="text-lg font-semibold mb-4">Filter Products</h2>

            <!-- Example Filter Section -->
            <div class="mb-6">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Category</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><label><input type="checkbox" class="mr-2">Men's</label></li>
                    <li><label><input type="checkbox" class="mr-2">Women's</label></li>
                    <li><label><input type="checkbox" class="mr-2">Unisex</label></li>
                </ul>
            </div>

            <div class="mb-6">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Material</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><label><input type="checkbox" class="mr-2">Leather</label></li>
                    <li><label><input type="checkbox" class="mr-2">Stainless Steel</label></li>
                    <li><label><input type="checkbox" class="mr-2">Silicone</label></li>
                </ul>
            </div>

            <!-- Add more filter groups as needed -->
        </div>
    </aside>
</div>

{% schema %}
{
    "name": "Template Collection",
    "settings": [
        {
            "type": "number",
            "id": "number_of_products_per_page",
            "default": 9,
            "label": "Number of products per page"
        }
    ]
}
{% endschema %}